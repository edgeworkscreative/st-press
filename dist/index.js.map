{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["interface StencilGlobalHTMLAttributes {\n\t'onPress'?: (event: CustomEvent<void>) => void;\n}\n\nclass PressEvents {\n\tprivate time: any;\n\tprivate threshold: any;\n\tprivate hasStarted: boolean;\n\tprivate startX: number;\n\tprivate startY: number;\n\tprivate moveX: number;\n\tprivate moveY: number;\n\t\n\tconstructor(time: number = 251, threshold: number = 9) {\n\t\tthis.time      = time;\n\t\tthis.threshold = threshold;\n\t\tdocument.addEventListener('touchstart', this.onStart.bind(this), true);\n\t\tdocument.addEventListener('mousedown', this.onStart.bind(this), true);\n\t\tdocument.addEventListener('touchend', this.onEnd.bind(this), true);\n\t\tdocument.addEventListener('mouseup', this.onEnd.bind(this), true);\n\t\tdocument.addEventListener('touchmove', this.onMove.bind(this), true);\n\t\tdocument.addEventListener('mousemove', this.onMove.bind(this), true);\n\t}\n\t\n\tonStart(ev: MouseEvent | TouchEvent) {\n\t\tif (!this.hasStarted) {\n\t\t\tthis.moveX = this.startX = (ev instanceof MouseEvent) ? ev.pageX : ev.touches[0].pageX;\n\t\t\tthis.moveY = this.startY = (ev instanceof MouseEvent) ? ev.pageY : ev.touches[0].pageY;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (this.hasStarted && Math.abs(this.startX - this.moveX) <= this.threshold && Math.abs(this.startY - this.moveY) <= this.threshold) {\n\t\t\t\t\tconst path = (ev as any).path;\n\t\t\t\t\tfor (let i = 0; i < path.length - 2; i++) {\n\t\t\t\t\t\tconst el    = path[i];\n\t\t\t\t\t\tconst event = new CustomEvent('press', {\n\t\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\t\tdetail:  el\n\t\t\t\t\t\t});\n\t\t\t\t\t\tel.dispatchEvent(event);\n\t\t\t\t\t}\n\t\t\t\t\tthis.hasStarted = false;\n\t\t\t\t}\n\t\t\t}, this.time);\n\t\t\tthis.hasStarted = true;\n\t\t}\n\t}\n\t\n\tonEnd() {\n\t\tthis.hasStarted = false;\n\t}\n\t\n\tonMove(ev: MouseEvent | TouchEvent) {\n\t\tthis.moveX = (ev instanceof MouseEvent) ? ev.pageX : ev.changedTouches[0].pageX;\n\t\tthis.moveY = (ev instanceof MouseEvent) ? ev.pageY : ev.changedTouches[0].pageY;\n\t}\n\t\n}\n\nnew PressEvents();"],"names":[],"mappings":"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"}